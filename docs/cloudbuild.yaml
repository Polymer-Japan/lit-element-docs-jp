steps:
# - name: ubuntu
#   dir: docs/_api
#   args: ['sh', 'copy_api.sh']
- name: 'gcr.io/cloud-builders/npm'
  dir: docs
  args: ['install']
# - name: gcr.io/cloud-builders/npm
#   dir: docs
#   args: ['run', 'gen-api-docs-init-patch']
# - name: gcr.io/cloud-builders/npm
#   dir: docs
#   args: ['run', 'gen-api-docs-tmp-typedoc-patch']
# - name: gcr.io/cloud-builders/npm
#   dir: docs
#   args: ['run', 'gen-api-docs-ja']
- name: 'gcr.io/$PROJECT_ID/polymer'
  dir: docs
  args: ['build']
- name: 'ubuntu'
  args: ['mkdir', '-p', 'docs/_site']
- name: jekyll/jekyll:3.8.6
  dir: docs
  args: ['jekyll', 'build']
- name: 'gcr.io/cloud-builders/gcloud'
  dir: docs
  args: ['app', 'deploy', '_site/app.yaml', '--project', 'polymer-japan', '--stop-previous-version']
